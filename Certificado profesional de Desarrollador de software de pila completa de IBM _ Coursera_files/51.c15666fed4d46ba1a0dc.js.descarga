(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{"jq+c":function(module,e,t){"use strict";t.r(e);var r=t("VbXa"),a=t.n(r),n=t("q1tI"),o=t.n(n),s=t("S+eF"),l=t.n(s),c=t("DnuM"),i=t("sQ/U"),u=t("hs7e"),d=t("fw5G"),g=t.n(d),h=t("15pW"),b=t("TSOT"),p=Object(b.a)(h.a.openCourseMembershipApi,{type:"rest"}),membershipsData=function(e){var t=(new g.a).addQueryParam("q","findByUser").addQueryParam("userId",e);return l()(p.get(t.toString()))},m=t("welz"),L=t.n(m),y=t("vlZc"),f=t.n(y),x=t("F/us"),v=t.n(x),w=t("qiY+"),E,C=f.a.AssociatedModel.extend({api:p,defaults:function defaults(){return{timestamp:Date.now()}},initialize:function initialize(e){if(!v()(e).has("courseId"))throw new Error("You must instantiate a Membership with a courseId");this.get("userId")||this.set("userId",e.userId||i.a.get().id),v()(e).has("id")||this.set("id",this.get("userId")+"~"+this.get("courseId"),{silent:!0})},hasTeachingRole:function hasTeachingRole(){return v()(h.a.courseRolesWithTeachAccess).contains(this.get("courseRole").toUpperCase())},hasModerationRole:function hasModerationRole(){return v()(h.a.courseRolesWithModeratorAccess).contains(this.get("courseRole").toUpperCase())},hasEnrolledRole:function hasEnrolledRole(){return!v()([w.a.BROWSER,w.a.NOT_ENROLLED,w.a.PRE_ENROLLED_LEARNER]).contains(this.get("courseRole"))},hasPreEnrolled:function hasPreEnrolled(){return this.get("courseRole")===w.a.PRE_ENROLLED_LEARNER},enroll:function enroll(e){this.set("courseRole",e||w.a.LEARNER);var t={data:this.toJSON()};return l()(this.api.post("",t))},unenroll:function unenroll(){return this.set("courseRole",w.a.NOT_ENROLLED),l()(this.api.delete(this.get("id")))}},w.a),k,R=L.a.Collection.extend({model:C,getEnrolled:function getEnrolled(){return this.filter((function(e){return e.get("courseRole")!==C.NOT_ENROLLED}))}}),promises_memberships=function(e){var t=membershipsData(e).then((function(e){return new R(e.elements)}));return t.done(),t},T=t("8li0"),N=Object(c.a)("/api/reports.v1",{type:"rest"}),B="teachVisitedAt",j=10080,A={getBannerData:function getBannerData(){var e=this;return this.getTeachingCourse().spread((function(t,r){return[t,r,e.getLearnerCounts(t,r)]}))},getVisitedTimestamp:function getVisitedTimestamp(){return localStorage.teachVisitedAt},setVisitedTimestamp:function setVisitedTimestamp(){localStorage.teachVisitedAt=Date.now()},shouldShow:function shouldShow(){var e=this.getVisitedTimestamp();if(e){var t=new Date(parseInt(e)),r=new Date(Date.now()),a,n,o;return 60*r.getHours()+r.getMinutes()-(60*t.getHours()+t.getMinutes())>10080}return!0},getTeachingCourse:function getTeachingCourse(){var e=i.a.get().id;if(!e)return l.a.reject();return promises_memberships(e).then((function(e){var t=e.find((function(e){return e.hasTeachingRole()}));if(t&&"UNIVERSITY_ADMIN"!==t.get("courseRole")){var r=t.get("courseId");return[t,u.a.fromId(r)]}return l.a.reject()})).spread((function(e,t){return T.a.isLaunched(t)?[e,t]:l.a.reject()}))},getLearnerCounts:function getLearnerCounts(e,t){var r=this;return l()(N.get("Course~".concat(t.id,"~activity_learner_counts"))).then((function(a){return r.validateLearnerCountsResponse(a)?a.elements[0].body:l.a.reject({membership:e,course:t})}))},validateLearnerCountsResponse:function validateLearnerCountsResponse(e){return e.elements&&e.elements[0]&&e.elements[0].body&&e.elements[0].body.latest&&e.elements[0].body.latest.starter_ever_count&&e.elements[0].body.latest.active_learner_past_1w_count&&e.elements[0].body.latest.visitor_ever_count&&e.elements[0].body["1w_ago"]&&e.elements[0].body["1w_ago"].starter_ever_count},getWeeklyNewLearnerCount:function getWeeklyNewLearnerCount(e){return e.latest.starter_ever_count-e["1w_ago"].starter_ever_count},getWeeklyActiveLearnerCount:function getWeeklyActiveLearnerCount(e){return e.latest.active_learner_past_1w_count},getTotalLearnerCount:function getTotalLearnerCount(e){return e.latest.visitor_ever_count}},O=A,W=A.getBannerData,D=A.getVisitedTimestamp,S=A.setVisitedTimestamp,I=A.shouldShow,V=A.getTeachingCourse,M=A.getLearnerCounts,q=A.validateLearnerCountsResponse,z=A.getWeeklyNewLearnerCount,P=A.getWeeklyActiveLearnerCount,U=A.getTotalLearnerCount,K=t("wab5"),F=t("17x9"),J=t.n(F),Y=t("kvW3"),G,H=function(e){function TotalLearnerBanner(){return e.apply(this,arguments)||this}var t;return a()(TotalLearnerBanner,e),TotalLearnerBanner.prototype.render=function render(){var e=this.props.course,t=e.name,r="/teach/".concat(e.slug),a=O.getTotalLearnerCount(this.props.learnerCounts);return o.a.createElement("div",{className:"rc-TotalLearnerBanner"},"A total of"," ",o.a.createElement("a",{href:r},o.a.createElement("strong",{className:"c-teach-banner-learner-count"},o.a.createElement(Y.c,{value:a})," learners"))," ","are enrolled in ",o.a.createElement("span",{className:"c-teach-banner-course-name"},t),". View more on the"," ",o.a.createElement("a",{href:r},G||(G=o.a.createElement("strong",null,"Course Dashboard."))))},TotalLearnerBanner}(o.a.Component);H.propTypes={course:J.a.object.isRequired,learnerCounts:J.a.object.isRequired};var Q=H,X,Z=function(e){function WeeklyActiveLearnerBanner(){return e.apply(this,arguments)||this}var t;return a()(WeeklyActiveLearnerBanner,e),WeeklyActiveLearnerBanner.prototype.render=function render(){var e=this.props.course,t=e.name,r="/teach/".concat(e.slug),a=O.getWeeklyActiveLearnerCount(this.props.learnerCounts);return o.a.createElement("div",{className:"rc-WeeklyActiveLearnerBanner"},o.a.createElement("a",{href:r},o.a.createElement("strong",{className:"c-teach-banner-learner-count"},o.a.createElement(Y.c,{value:a})," learners"))," ","were active in ",o.a.createElement("span",{className:"c-teach-banner-course-name"},t)," in the past week. View more on the"," ",o.a.createElement("a",{href:r},X||(X=o.a.createElement("strong",null,"Course Dashboard."))))},WeeklyActiveLearnerBanner}(o.a.Component);Z.propTypes={course:J.a.object.isRequired,learnerCounts:J.a.object.isRequired};var ee=Z,te,re=function(e){function WeeklyNewLearnerBanner(){return e.apply(this,arguments)||this}var t;return a()(WeeklyNewLearnerBanner,e),WeeklyNewLearnerBanner.prototype.render=function render(){var e=this.props.course,t=e.name,r="/teach/".concat(e.slug),a=O.getWeeklyNewLearnerCount(this.props.learnerCounts);return o.a.createElement("div",{className:"rc-WeeklyNewLearnerBanner"},o.a.createElement("a",{href:r},o.a.createElement("strong",{className:"c-teach-banner-learner-count"},o.a.createElement(Y.c,{value:a})," learners"))," ","enrolled in ",o.a.createElement("span",{className:"c-teach-banner-course-name"},t)," in the past week. View more on the"," ",o.a.createElement("a",{href:r},te||(te=o.a.createElement("strong",null,"Course Dashboard."))))},WeeklyNewLearnerBanner}(o.a.Component);re.propTypes={course:J.a.object.isRequired,learnerCounts:J.a.object.isRequired};var ae,ne,oe,se=[{key:"weeklyActiveLearner",component:ee},{key:"weeklyNewLearner",component:re},{key:"totalLearner",component:Q}],le=function(e){function TeachBanner(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={course:null,membership:null,learnerCounts:{},bannerIndex:-1,dismissed:!1},t.handleDismiss=function(){O.setVisitedTimestamp(),t.setState({dismissed:!0})},t}a()(TeachBanner,e);var t=TeachBanner.prototype;return t.componentDidMount=function componentDidMount(){var e=this;O.getBannerData().spread((function(t,r,a){var n=Math.round(Math.random()*(se.length-1));e.setState({course:r,membership:t,learnerCounts:a,bannerIndex:n})})).catch((function(){})).done()},t.renderBanner=function renderBanner(){var e=se[this.state.bannerIndex].component;return(o.a.createElement(e,{course:this.state.course,learnerCounts:this.state.learnerCounts}))},t.render=function render(){if(!this.state.course||this.state.dismissed||!O.shouldShow())return ne||(ne=o.a.createElement("div",null));return(o.a.createElement("div",{className:"rc-TeachBanner bt3-alert bt3-alert-info bt3-alert-dismissable"},o.a.createElement("div",{className:"c-teach-banner-content"},o.a.createElement("button",{onClick:this.handleDismiss,className:"bt3-close","data-dismiss":"alert","aria-label":"Close"},oe||(oe=o.a.createElement("span",{"aria-hidden":"true"},"×"))),this.renderBanner())))},TeachBanner}(o.a.Component),ce=e.default=le},wC8J:function(module,e,t){"use strict";var r=t("kgYC"),a=t("0aWs"),n=t("0xU5"),o=t("/5n7"),s=t("BGKE"),l=t("q1tI"),c=t.n(l),i=t("Gok7"),u=t("iuhU"),d=t("8Hdl"),g=t("AeFk"),h=t("cnkd"),b=Object(h.a)("tag",["hasIcon","category","status","primary","secondary","default","highlight1","highlight2","success","warning","error"]),p,m=function getTagCss(e){return Object(g.c)("display:inline-flex;align-items:center;padding:",e.spacing(0,8),";border:1px solid;border-radius:4px;&.",b.hasIcon,"{padding:",e.spacing(0,8,0,4),";}&.",b.category,".",b.primary,".",b.default,"{background-color:",e.palette.gray[300],";border-color:",e.palette.gray[300],";}&.",b.category,".",b.primary,".",b.highlight1,"{color:",e.palette.white,";background-color:",e.palette.purple[800],";border-color:",e.palette.purple[800],";}&.",b.category,".",b.primary,".",b.highlight2,"{background-color:",e.palette.yellow[500],";border-color:",e.palette.yellow[500],";}&.",b.category,".",b.secondary,".",b.default,"{border-color:",e.palette.gray[700],";}&.",b.category,".",b.secondary,".",b.highlight1,"{border-color:",e.palette.purple[800],";}&.",b.category,".",b.secondary,".",b.highlight2,"{border-color:",e.palette.yellow[500],";}&.",b.status,".",b.primary,".",b.default,"{color:",e.palette.white,";background-color:",e.palette.gray[700],";border-color:",e.palette.gray[700],";}&.",b.status,".",b.primary,".",b.highlight1,"{color:",e.palette.white,";background-color:",e.palette.blue[800],";border-color:",e.palette.blue[800],";}&.",b.status,".",b.primary,".",b.success,"{color:",e.palette.white,";background-color:",e.palette.green[700],";border-color:",e.palette.green[700],";}&.",b.status,".",b.primary,".",b.warning,"{color:",e.palette.white,";background-color:",e.palette.yellow[800],";border-color:",e.palette.yellow[800],";}&.",b.status,".",b.primary,".",b.error,"{color:",e.palette.white,";background-color:",e.palette.red[700],";border-color:",e.palette.red[700],";}&.",b.status,".",b.secondary,".",b.default,"{color:",e.palette.gray[700],";background-color:",e.palette.gray[100],";border-color:",e.palette.gray[100],";}&.",b.status,".",b.secondary,".",b.highlight1,"{color:",e.palette.blue[800],";background-color:",e.palette.blue[100],";border-color:",e.palette.blue[100],";}&.",b.status,".",b.secondary,".",b.success,"{color:",e.palette.green[700],";background-color:",e.palette.green[50],";border-color:",e.palette.green[50],";}&.",b.status,".",b.secondary,".",b.warning,"{color:",e.palette.yellow[800],";background-color:",e.palette.yellow[100],";border-color:",e.palette.yellow[100],";}&.",b.status,".",b.secondary,".",b.error,"{color:",e.palette.red[700],";background-color:",e.palette.red[50],";border-color:",e.palette.red[50],";}svg{margin-right:",e.spacing(4),";}")},L,y,f,x,v,w,E,C,k,R,T,N,B,j,A,O,W,D,S,I={category:"Category: {textLabel}",status:"Status: {textLabel}",success:"Success: {textLabel}",warning:"Warning: {textLabel}",error:"Error: {textLabel}"},V=I,M,q,z,P,U,K,F,J,Y,G,H,Q,X,Z,ee,te,re,ae,ne,oe,se,le,ce,ie,ue,de,ge,he,be,pe,me,Le,ye,fe,xe,ve,we,Ee,Ce,ke,Re,Te,Ne,_e,Be,je,Ae,Oe,We,De,Se,Ie,Ve,Me,qe,ze,Pe,Ue,Ke,Fe,Je,Ye,Ge,He="类别：{textLabel}",Qe="状态：{textLabel}",Xe="成功：{textLabel}",Ze="警告：{textLabel}",$e,et={category:"类别：{textLabel}",status:"状态：{textLabel}",success:"成功：{textLabel}",warning:"警告：{textLabel}",error:"错误：{textLabel}"},tt=et,rt,at,nt,ot,st,lt,ct,it,ut={ar:{category:"الفئة: {textLabel}",status:"الحالة: {textLabel}",success:"نجاح: {textLabel}",warning:"تحذير: {textLabel}",error:"خطأ: {textLabel}"},de:{category:"Kategorie: {textLabel}",status:"Status: {textLabel}",success:"Erfolg: {textLabel}",warning:"Warnung: {textLabel}",error:"Fehler: {textLabel}"},en:I,"en-US":I,es:{category:"Categoría: {textLabel}",status:"Estado: {textLabel}",success:"Éxito: {textLabel}",warning:"Advertencia: {textLabel}",error:"Error: {textLabel}"},fr:{category:"Catégorie : {textLabel}",status:"Statut : {textLabel}",success:"Réussite : {textLabel}",warning:"Avertissement : {textLabel}",error:"Erreur : {textLabel}"},ja:{category:"カテゴリー: {textLabel}",status:"ステータス: {textLabel}",success:"成功: {textLabel}",warning:"警告: {textLabel}",error:"エラー: {textLabel}"},id:{category:"Kategori: {textLabel}",status:"Status: {textLabel}",success:"Sukses: {textLabel}",warning:"Peringatan: {textLabel}",error:"Kesalahan: {textLabel}"},ko:{category:"카테고리: {textLabel}",status:"상태: {textLabel}",success:"성공: {textLabel}",warning:"경고: {textLabel}",error:"오류: {textLabel}"},pt:{category:"Categoria: {textLabel}",status:"Situação: {textLabel}",success:"Sucesso: {textLabel}",warning:"Aviso: {textLabel}",error:"Erro: {textLabel}"},ru:{category:"Категория: {textLabel}",status:"Статус: {textLabel}",success:"Успешно: {textLabel}",warning:"Внимание: {textLabel}",error:"Ошибка: {textLabel}"},zh:{category:"类别：{textLabel}",status:"状态：{textLabel}",success:"成功：{textLabel}",warning:"警告：{textLabel}",error:"错误：{textLabel}"},"zh-hk":et,"zh-mo":et,"zh-tw":et,kk:{category:"Санат: {textLabel}",status:"Күйі: {textLabel}",success:"Сәтті: {textLabel}",warning:"Ескерту: {textLabel}",error:"Қате: {textLabel}"},uk:{category:"Категорія: {textLabel}",status:"Статус: {textLabel}",success:"Виконано: {textLabel}",warning:"Попередження: {textLabel}",error:"Помилка: {textLabel}"}},dt=["children","variant","priority","color","icon","className","aria-label"],gt=["default","highlight1","success","warning","error"],ht=["default","highlight1","highlight2"],bt=function getTranslationKey(e,t,r){if(r||"category"===e)return"category";if("default"===t||"highlight1"===t)return"status";return t},pt=c.a.forwardRef((function Tag(e,t){var l=e.children,c=e.variant,g=void 0===c?"category":c,h=e.priority,p=void 0===h?"primary":h,L=e.color,y=void 0===L?"default":L,f=e.icon,x=e.className,v=e["aria-label"],w=Object(o.c)(e,dt),E=Object(r.a)(),C=Object(a.a)(ut),k="category"===g&&!ht.includes(y)||"status"===g&&!gt.includes(y);return Object(s.c)("span",Object.assign({ref:t,className:Object(u.default)(b[g],b[p],b[k?"default":y],!!f&&b.hasIcon,x),css:m(E),"data-testid":"tag-root"},w,{children:[f&&Object(s.b)(n.a.Provider,Object.assign({value:{size:"small"}},{children:f}),void 0),Object(s.b)(i.a,{children:v||C(bt(g,y,k),{textLabel:l})},void 0),Object(s.b)(d.a,Object.assign({"aria-hidden":!0,color:"inherit",component:"span",variant:"status"===g?"h4bold":"body2"},{children:l}),void 0)]}),void 0)})),mt=e.a=pt},wab5:function(module,exports,e){e("xTv4")},xTv4:function(module,exports,e){}}]);
//# sourceMappingURL=51.c15666fed4d46ba1a0dc.js.map